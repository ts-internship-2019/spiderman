@model iWasHere.Domain.DTOs.TouristAttractionMapsModel



@{
    ViewData["Title"] = "TouristAttraction";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<link href="https://fonts.googleapis.com/css?family=Indie+Flower&display=swap" rel="stylesheet">*@

<style>
    body {
        background-image: linear-gradient(to right top, #af71f2, #a661f2, #9c4ff2, #913cf2, #8624f2);
        background-color: black;
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
        box-sizing: border-box;
    }

    .details {
        border: 1px solid purple;
        color: white;
        font-size: 18px;
        border-radius: 8px;
        background-color: #2A0537;
        /*background-image: linear-gradient(to right top, #7638d6, #6d55e0, #676ce6, #6980ea, #7192ea, #68a2f1, #65b1f6, #69bff8, #52cffe, #41dfff, #46eefa, #5ffbf1);*/
        text-align: center;
        width: 500px;
    }


    label {
        width: 100px;
    }

    input:hover {
        cursor: default;
    }

    input:focus {
        outline: none;
    }

    textarea:focus {
        outline: none;
    }

    textarea:hover {
        cursor: default;
    }

    h1, h3 {
        color: white;
    }


    .parent {
        color: white;
        font-size: 22px;
        border-radius: 12px;
        /*background-image: linear-gradient(to right top, #7638d6, #6d55e0, #676ce6, #6980ea, #7192ea, #68a2f1, #65b1f6, #69bff8, #52cffe, #41dfff, #46eefa, #5ffbf1);*/
    }
    .carousel {
        width: 300px;
    }

    .carousel-item img {
        object-fit: contain;
        object-position: center;
        height: 500px;
        width: 600px;
    }
    #carouselExampleControls{
        width:600px;
        height:500px;
       
    }
</style>

<h1>Details</h1>
<h3>Tourist Attraction</h3>
<hr style="background:white;" />


<div class="parent" id="gradient">
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="name">Name</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="name" name="name" value="Name" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"> <label for="description">Description</label></div>
        @* <div class="col-lg-6"><input type="text" id="description" name="description" value="Description" readonly="readonly" /></div>*@
        <div class="col-lg-6"><textarea class="details" id="description" name="description" value="Description" readonly="readonly"></textarea></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"> <label for="longitude">Longitude</label> </div>
        <div class="col-lg-6"> <input class="details" type="text" id="longitude" name="longitude" value="Longitude" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="latitude">Latitude</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="latitude" name="latitude" value="Latitude" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="category">Category</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="category" name="category" value="Category" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="city">City</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="city" name="city" value="City" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="landmark">Landmark</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="landmark" name="landmark" value="Landmark" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="county">County</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="county" name="county" value="County" readonly="readonly" /></div>
    </div>
    <div class="row highligh mb-2">
        <div class="col-lg-6"><label for="country">Country</label></div>
        <div class="col-lg-6"><input class="details" type="text" id="country" name="country" value="Country" readonly="readonly" /></div>
    </div>
</div>

<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div id="objective-images" class="carousel-inner">
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

@using (Html.BeginForm("GetTouristAttractionMapsValues", "TouristAttraction", FormMethod.Post))
{
    @Html.HiddenFor(a => a.TouristAttractionId)
    <input type="text" asp-for="Latitude" hidden id="Latitude" />

    <input type="text" asp-for="Longitude" hidden id="Longitude" />

    <div id="map"></div>

}

<script>
    var map;
    function initMap() {
        debugger;
        var Latitude = parseFloat($("#Latitude").val());
        var Longitude = parseFloat($("#Longitude").val());

        var location = { lat: Latitude, lng: Longitude };

        var map = new google.maps.Map(
            document.getElementById('map'), { zoom: 15, center: location });

        var marker = new google.maps.Marker({ position: location, map: map });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVxnhhEH_WDFhXv_PWaJNXztPWKLBO81Y&callback=initMap" async defer></script>


<style>
    #map {
        height: 400px;
        width: 700px;
    }
</style>



@using (Html.BeginForm("AddReview", "TouristAttraction", FormMethod.Post))
{

    

    @Html.HiddenFor(a => a.TouristAttractionId)

    <div>
        <h6> UserName </h6>
        <input type="text" asp-for="review.User" id="user" />
    </div>
    <div>
        <h6> Titlu Comentariu</h6>
        <input type="text" asp-for="review.Title" id="title" />
    </div>

    <div>
        <h6> Comentariu </h6>
        <input type="text" asp-for="review.Comment" id="comment" />
    </div>

     <input type="text" hidden asp-for="review.TouristAttractionId" />

    <div class="rating">
        <span><input type="radio" name="RatingValue" id="str1" value="1"><label for="str1"></label></span>
        <span><input type="radio" name="RatingValue" id="str2" value="2"><label for="str2"></label></span>
        <span><input type="radio" name="RatingValue" id="str3" value="3"><label for="str3"></label></span>
        <span><input type="radio" name="RatingValue" id="str4" value="4"><label for="str4"></label></span>
        <span><input type="radio" name="RatingValue" id="str5" value="5"><label for="str5"></label></span>
        <span><input type="radio" name="RatingValue" id="str6" value="6"><label for="str6"></label></span>
        <span><input type="radio" name="RatingValue" id="str7" value="7"><label for="str7"></label></span>
        <span><input type="radio" name="RatingValue" id="str8" value="8"><label for="str8"></label></span>
        <span><input type="radio" name="RatingValue" id="str9" value="9"><label for="str9"></label></span>
        <span><input type="radio" name="RatingValue" id="str10" value="10"><label for="str10"></label></span>
    </div>

    <div>
        <button class="k-button k-primary" style="margin-top: 2em" name="btn" value="save">Salveaza</button>

        <button class="k-button k-primary" style="margin-top: 2em" name="btn" value="cancel">Anuleaza</button>
    </div>


    <script>
        $(document).ready(function () {
            $(".rating input:radio").attr("checked", false);

            $('.rating input').click(function () {
                $(".rating span").removeClass('checked');
                $(this).parent().addClass('checked');
            });
            $('input:radio').change();
        });
    </script>
}


<script>
window.onload=function(){update()}

    function update() {
        var url_string = window.location.href; //window.location.href
        var url = new URL(url_string);
        let id = url.searchParams.get("Id");
        let test;
        if (id !== null) {
            var touristData = {
                Id: id
            }
            $.ajax({
        type: "GET",
        url: "@Url.Action("GetObjectiveDetails", "TouristAttraction")",
        content: "application/json; charset=utf-8",
        dataType: "json",
        //transferEncoding:"chunke",
        data: touristData,
        cache: false,
            success: function (d) {
            if (d.result) {
                document.getElementById('name').value = d.result[0].Name;
                document.getElementById('description').value = d.result[0].Description;
                document.getElementById('longitude').value = d.result[0].Longtitudine;
                document.getElementById('latitude').value = d.result[0].Latitudine;
                document.getElementById('category').value = d.result[0].CategoryName;
                document.getElementById('city').value = d.result[0].CityName;
                document.getElementById('landmark').value = d.result[0].LandmarkTypeName;
                document.getElementById('county').value = d.result[0].CountyName;
                document.getElementById('country').value = d.result[0].CountryName;
                if (d.result[0].Image.length > 0) {
                    let image;
                    d.result[0].Image.map((img, index) => {
                        image = document.createElement("img");
                        activeDiv = document.createElement("div");
                        if (index == 0) {
                            activeDiv.classList.add("carousel-item");
                            activeDiv.classList.add("active");
                            image.classList.add("d-block");
                             image.classList.add("w-100");
                            image.src = "/images/" + img;
                            activeDiv.append(image);
          
                            $('#objective-images').append(activeDiv);
                        } else {
                            activeDiv.classList.add("carousel-item");
                            image.classList.add("d-block");
                            image.classList.add("w-100");
                            image.src = "/images/" + img;
                            activeDiv.append(image);
          
                            $('#objective-images').append(activeDiv);
                        }
                    })
                }
            }
            else {
                alert("Error");
            }
        },
        error: function(xhr, textStatus, errorThrown) {
            // TODO: Show error
        }
    });
        }


    }

</script>
